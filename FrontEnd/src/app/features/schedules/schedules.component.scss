@use '../../../styles/variables' as *;
@use '../../../styles/mixins' as *;
@use 'sass:color';

.schedules {
  padding: $spacing-lg;
  background-color: $background-color;
  min-height: 100%;
}

.schedules-header {
  @include flex(row, space-between, center);
  margin-bottom: $spacing-xl;
}

.header-left {
  @include flex(row, flex-start, center);
  gap: $spacing-xl;

  h1 {
    color: $primary-color;
    margin: 0;
  }
}

.search {
  position: relative;
  width: 300px;

  i {
    position: absolute;
    left: $spacing-sm;
    top: 50%;
    transform: translateY(-50%);
    color: $text-secondary;
  }

  input {
    width: 100%;
    padding: $spacing-sm $spacing-sm $spacing-sm $spacing-xl;
    border: 1px solid $border-color;
    border-radius: $border-radius-lg;
    background-color: $background-light;
    @include typography($font-size-base);

    &:focus {
      outline: none;
      border-color: $primary-color;
    }
  }
}

.header-right {
  @include flex(row, flex-end, center);
  gap: $spacing-md;
}

.filter-btn, .add-btn {
  @include button;
  @include flex(row, center, center);
  gap: $spacing-sm;
  padding: $spacing-sm $spacing-md;
}

.filter-btn {
  background-color: $background-light;
  color: $text-primary;
  border: 1px solid $border-color;

  &:hover {
    background-color: $background-dark;
  }
}

.add-btn {
  background-color: $primary-color;
  color: $text-light;
  border: 1px solid $border-color;
  box-shadow: $shadow-sm;

  &:hover {
    background-color: $primary-dark;
    transform: translateY(-2px);
  }
}

.filter-panel {
  background-color: $background-light;
  border: 1px solid $border-color;
  border-radius: $border-radius-lg;
  padding: $spacing-lg;
  margin-bottom: $spacing-xl;
  display: none;
  box-shadow: $shadow-sm;

  &.show {
    display: block;
  }
}

.filter-group {
  margin-bottom: $spacing-lg;

  &:last-child {
    margin-bottom: 0;
  }

  label {
    display: block;
    color: $text-primary;
    @include typography($font-size-base, $font-weight-medium);
    margin-bottom: $spacing-sm;
  }
}

.filter-options {
  @include flex(row, flex-start, center);
  gap: $spacing-lg;
  flex-wrap: wrap;
}

.checkbox {
  @include flex(row, flex-start, center);
  gap: $spacing-sm;
  cursor: pointer;

  input {
    width: 16px;
    height: 16px;
  }

  span {
    color: $text-primary;
    @include typography($font-size-base);
  }
}

.date-range {
  @include flex(row, flex-start, center);
  gap: $spacing-md;

  input {
    padding: $spacing-sm;
    border: 1px solid $border-color;
    border-radius: $border-radius-sm;
    background-color: $background-light;
    @include typography($font-size-base);

    &:focus {
      outline: none;
      border-color: $primary-color;
    }
  }

  span {
    color: $text-secondary;
    @include typography($font-size-base);
  }
}

.filter-actions {
  @include flex(row, flex-end, center);
  margin-top: $spacing-lg;
}

.clear-btn {
  @include button(transparent, $text-primary);
  border: 1px solid $border-color;

  &:hover {
    background-color: $background-dark;
  }
}

.schedules-grid {
  background-color: $background-light;
  border: 1px solid $border-color;
  border-radius: $border-radius-lg;
  overflow: hidden;
  box-shadow: $shadow-sm;
}

.schedules-table {
  overflow-x: auto;

  &::-webkit-scrollbar {
    height: 8px;
  }

  &::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 4px;
  }

  &::-webkit-scrollbar-thumb {
    background: $primary-color;
    border-radius: 4px;
  }

  table {
    width: 100%;
    border-collapse: collapse;
  }

  th, td {
    padding: $spacing-md;
    text-align: left;
    border-bottom: 1px solid $border-color;
  }

  th {
    background-color: $background-dark;
    color: $text-primary;
    @include typography($font-size-base, $font-weight-medium);
    
    &.sortable {
      cursor: pointer;
      user-select: none;
      position: relative;
      padding-right: $spacing-xl;
      transition: background-color 0.2s;
      
      &:hover {
        background-color: color.adjust($background-dark, $lightness: -5%);
      }
      
      i {
        position: absolute;
        right: $spacing-sm;
        top: 50%;
        transform: translateY(-50%);
        color: $text-secondary;
        font-size: 0.875rem;
        transition: color 0.2s;
      }
      
      &:hover i {
        color: $primary-color;
      }
    }
  }

  td {
    color: $text-primary;
    @include typography($font-size-base);
  }
}

.user-info {
  @include flex(row, flex-start, center);
  gap: $spacing-sm;
}

.avatar {
  width: 32px;
  height: 32px;
  border-radius: $border-radius-full;
  object-fit: cover;
}

.doctor-details {
  @include flex(column, flex-start, flex-start);
  gap: $spacing-xs;

  small {
    color: $text-secondary;
    @include typography($font-size-sm);
  }
}

.type-badge {
  padding: $spacing-xs $spacing-sm;
  border-radius: $border-radius-sm;
  @include typography($font-size-sm, $font-weight-medium);

  &.first_visit {
    background-color: rgba($primary-color, 0.1);
    color: $primary-color;
  }

  &.follow_up {
    background-color: rgba($info-color, 0.1);
    color: $info-color;
  }

  &.exam {
    background-color: rgba($warning-color, 0.1);
    color: $warning-color;
  }

  &.procedure {
    background-color: rgba($success-color, 0.1);
    color: $success-color;
  }
}

.status-badge {
  padding: $spacing-xs $spacing-sm;
  border-radius: $border-radius-sm;
  @include typography($font-size-sm, $font-weight-medium);

  &.scheduled {
    background-color: rgba($info-color, 0.1);
    color: $info-color;
  }

  &.confirmed {
    background-color: rgba($primary-color, 0.1);
    color: $primary-color;
  }

  // Status: Finalizado/Conclu√≠do - Azul
  &.completed {
    background-color: rgba(33, 150, 243, 0.15);
    color: #1976d2;
    border: 1px solid rgba(33, 150, 243, 0.3);
  }

  // Status: Cancelado - Vermelho
  &.cancelled {
    background-color: rgba(244, 67, 54, 0.15);
    color: #d32f2f;
    border: 1px solid rgba(244, 67, 54, 0.3);
  }

  // Status: Ativo - Verde
  &.active {
    background-color: rgba(76, 175, 80, 0.15);
    color: #388e3c;
    border: 1px solid rgba(76, 175, 80, 0.3);
  }
}

// Cores para as linhas da tabela baseadas no status
tr {
  &.status-active {
    background-color: rgba(76, 175, 80, 0.05);
    
    &:hover {
      background-color: rgba(76, 175, 80, 0.1);
    }
  }

  &.status-cancelled {
    background-color: rgba(244, 67, 54, 0.05);
    opacity: 0.9;
    
    &:hover {
      background-color: rgba(244, 67, 54, 0.1);
    }
  }

  &.status-completed {
    background-color: rgba(33, 150, 243, 0.05);
    
    &:hover {
      background-color: rgba(33, 150, 243, 0.1);
    }
  }
}

.actions {
  @include flex(row, flex-start, center);
  gap: $spacing-sm;
}

.action-btn {
  @include button(transparent, $text-secondary);
  padding: $spacing-xs;
  font-size: $font-size-base;

  &:hover {
    color: $primary-color;
    background-color: rgba($primary-color, 0.1);
    box-shadow: $shadow-sm;
    transform: translateY(-1px);
  }
}

.pagination {
  @include flex(column, center, stretch);
  gap: $spacing-md;
  margin-top: $spacing-xl;
  
  .pagination-controls {
    @include flex(row, space-between, center);
    gap: $spacing-md;
    padding: $spacing-md;
    background-color: $background-light;
    border-radius: $border-radius-lg;
    
    label {
      color: $text-primary;
      @include typography($font-size-base, $font-weight-medium);
    }
    
    select {
      padding: $spacing-xs $spacing-sm;
      border: 1px solid $border-color;
      border-radius: $border-radius-sm;
      background-color: white;
      color: $text-primary;
      cursor: pointer;
      
      &:focus {
        outline: none;
        border-color: $primary-color;
      }
    }
    
    .page-info {
      color: $text-secondary;
      @include typography($font-size-sm);
    }
  }
  
  .pagination-buttons {
    @include flex(row, center, center);
    gap: $spacing-md;
  }
}

.page-btn {
  @include button(transparent, $text-primary);
  padding: $spacing-sm;
  border: 1px solid $border-color;
  border-radius: $border-radius-sm;
  box-shadow: $shadow-sm;

  &:hover:not(:disabled) {
    background-color: $background-dark;
    transform: translateY(-1px);
  }

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
}

.page-info {
  color: $text-primary;
  @include typography($font-size-base);
}

.loading-container {
  @include flex(column, center, center);
  padding: $spacing-xl;
  text-align: center;
}

.loading-spinner {
  @include flex(row, center, center);
  gap: $spacing-md;
  color: $text-secondary;
  @include typography($font-size-base);

  i {
    font-size: $font-size-large;
    color: $primary-color;
  }
}

.error-message {
  @include flex(row, center, center);
  gap: $spacing-md;
  padding: $spacing-lg;
  background-color: rgba($error-color, 0.1);
  border: 1px solid rgba($error-color, 0.3);
  border-radius: $border-radius-lg;
  color: $error-color;
  @include typography($font-size-base);

  i {
    font-size: $font-size-large;
  }

  .retry-btn {
    @include button($error-color, $text-light);
    padding: $spacing-xs $spacing-sm;
    font-size: $font-size-small;
    margin-left: $spacing-md;
  }
}

.services-list {
  @include flex(row, flex-start, center);
  gap: $spacing-xs;
  flex-wrap: wrap;
}

.service-badge {
  padding: $spacing-xs $spacing-sm;
  background-color: rgba($primary-color, 0.1);
  color: $primary-color;
  border-radius: $border-radius-sm;
  @include typography($font-size-small, $font-weight-medium);
}

.no-services {
  color: $text-secondary;
  @include typography($font-size-small);
  font-style: italic;
}

@include responsive(lg) {
  .header-left {
    flex-direction: column;
    align-items: flex-start;
    gap: $spacing-md;
  }

  .search {
    width: 100%;
  }
}

@include responsive(md) {
  .schedules-header {
    flex-direction: column;
    gap: $spacing-md;
  }

  .header-right {
    width: 100%;
    justify-content: space-between;
  }

  .filter-options {
    flex-direction: column;
    align-items: flex-start;
    gap: $spacing-sm;
  }

  .date-range {
    flex-direction: column;
    align-items: flex-start;
    gap: $spacing-sm;

    span {
      display: none;
    }
  }
}

