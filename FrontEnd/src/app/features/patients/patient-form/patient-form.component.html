<div class="patient-form-container">
  <h2>{{ isEditMode ? 'Editar' : 'Novo' }} Paciente</h2>

  <form [formGroup]="patientForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="name">Nome Completo</label>
      <input
        type="text"
        id="name"
        formControlName="nome"
        placeholder="Digite o nome completo"
        [class.error]="patientForm.get('nome')?.invalid && patientForm.get('nome')?.touched"
      >
      <div class="error-message" *ngIf="patientForm.get('nome')?.touched && patientForm.get('nome')?.errors?.['required']">
        Nome é obrigatório
      </div>
      <div class="error-message" *ngIf="patientForm.get('nome')?.touched && patientForm.get('nome')?.errors?.['minlength']">
        Nome deve ter pelo menos 3 caracteres
      </div>
    </div>

    <div class="form-group">
      <label for="email">E-mail</label>
      <input
        type="email"
        id="email"
        formControlName="email"
        placeholder="Digite o e-mail"
        [class.error]="patientForm.get('email')?.invalid && patientForm.get('email')?.touched"
      >
      <div class="error-message" *ngIf="patientForm.get('email')?.touched && patientForm.get('email')?.errors?.['required']">
        E-mail é obrigatório
      </div>
      <div class="error-message" *ngIf="patientForm.get('email')?.touched && patientForm.get('email')?.errors?.['email']">
        E-mail inválido
      </div>
    </div>

    <div class="form-group">
      <label for="phone">Telefone</label>
      <input
        type="tel"
        id="phone"
        formControlName="telefone"
        placeholder="(00) 00000-0000"
        [class.error]="patientForm.get('telefone')?.invalid && patientForm.get('telefone')?.touched"
      >
      <div class="error-message" *ngIf="patientForm.get('telefone')?.touched && patientForm.get('telefone')?.errors?.['required']">
        Telefone é obrigatório
      </div>
      <div class="error-message" *ngIf="patientForm.get('telefone')?.touched && patientForm.get('telefone')?.errors?.['pattern']">
        Telefone deve estar no formato (00) 00000-0000
      </div>
    </div>

    <div class="form-group">
      <label for="status">Status</label>
      <select
        id="status"
        formControlName="status"
        [class.error]="patientForm.get('status')?.invalid && patientForm.get('status')?.touched"
      >
        <option value="ativo">Ativo</option>
        <option value="inativo">Inativo</option>
      </select>
      <div class="error-message" *ngIf="patientForm.get('status')?.touched && patientForm.get('status')?.errors?.['required']">
        Status é obrigatório
      </div>
    </div>

    <div class="form-actions">
      <button type="button" class="btn-secondary" (click)="onCancel()" [disabled]="isSubmitting">
        Cancelar
      </button>
      <button type="submit" class="btn-primary" [disabled]="patientForm.invalid || isSubmitting">
        {{ isSubmitting ? 'Salvando...' : (isEditMode ? 'Salvar' : 'Criar') }}
      </button>
    </div>
  </form>
</div>
